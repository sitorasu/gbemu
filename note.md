## 使用する言語、ライブラリ、ツール
* C++17
* SDL2
* CMake
* clang-format
* テストツール何か

## コンパイルコマンド
```
g++ -std=c++17 -Wall -Wextra src/*.cc
```

## 方針
* テストを重視する
* 部品ごとにテストできるように設計を工夫する
* コンパイルオプションで警告が厳しめに出るようにする
* 作ってみないことにはわからない部分が多いので、とりあえず作ってみてまずかったらやりなおすの精神
* 最初は完璧に作らないようにしつつ、できれば後で詳細を詰められるような設計にしておく
* Windows, Mac, Linuxで動くようにする
* グラフィックスだけでなくオーディオも実装する
* ブートROMはエミュレートするが、ユーザーがブートROMを持っていればそれを使えるようにもする
* CPUの状態を進めてから、他のコンポーネントを追い付かせる手法を取る
* PPUのFecherやらFIFOの挙動が全然わからないので、とりあえずそこはエミュレートしないで、OAM Searchが終わったら1行まとめて描画する
  * そこをエミュレートしないといつmode 3が終わるのかわからないという問題があるが、常にmode 3が最短で終わるようにしておけば、ゲームがmode 3（の最短ラインより伸びた区間）でVRAMあるいはOAM RAMにアクセスしない限りは大丈夫なはず

## フレームレート
* 60fpsを上限とする
* 性能の低いマシンでもフレームレートを落として等速で動作するようにしたい
  * なるべく描画の間隔が一定になるように動的にフレームレートを調整するとかできると思うけどそれは先の話

## コーディング規約
* [Google C++ Style Guide](https://google.github.io/styleguide/cppguide.html)に従う。代表的なルールを以下に書いておく。
  * ソースファイルの拡張子は`cc`、ヘッダファイルの拡張子は`h`（[File Names](https://google.github.io/styleguide/cppguide.html#File_Names)）
  * ファイル名はスネークケース（[File Names](https://google.github.io/styleguide/cppguide.html#File_Names)）
* ドキュメントやコメントやコミットメッセージなどは日本語で書く

## 検討中
* テスト用ROMを使用するテスト環境を簡単に立ち上げるためにテスト用ROMのリポジトリを何らかの形で参照したい気がするけどどうすればいいんだろう
  * cmakeなりそれをラップするスクリプトなりでダウンロードする？
  * gitにそういうのをいい感じにやってくれる機能がある？

## テスト用ROMのリンク
* https://github.com/dusterherz/gb-hello-world
* https://gbdev.gg8.se/files/roms/blargg-gb-tests/

## ゲームボーイの仕様に関するメモ
* ブートROM（電源投入後最初に起動するプログラム）はCPUに焼かれていて、それがROMのアドレス$0000-$00FFにコピーされる。その領域を空けておかなければならないのでROMのコードは$0100から始まる

## 不明な仕様
* Pixel FIFOの挙動、それによって決まるmode 3の長さ

## マイルストーン
- [x] テスト用ROM（cpu_instrs, instr_timing）を用意する
- [x] MBC1を実装する（テスト用ROMがMBC1なので）
- [ ] CPUを実装してcpu_instrsを通す（シリアル出力で確認）
- [ ] CPUを実装してinstr_timingを通す（シリアル出力で確認）
- [ ] PPUを実装してテスト用ROMを通す
- [ ] APUを実装する
- [ ] cmakeの導入

## ToDo
- [ ] CartridegeHeaderのコンストラクタを簡素化する
- [ ] utils.cc/hの関数をUtils名前空間で囲む？
  - 名前空間の命名規則ってどうだっけ
  - マクロは名前空間の影響を受けるか？
- [ ] コマンドライン引数を順不同にする
- [ ] memory.hという名前はよくなかったかも（標準ライブラリと被る）
